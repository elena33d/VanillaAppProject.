(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function p(e,t){e&&e.classList.remove("rating-modal__input--error","rating-modal__textarea--error","footer__subscribe-form-input--error","form-field--error"),t&&(t.textContent="",t.classList.remove("form-error--visible"))}function H(){const e=document.getElementById("js-rating-server-message"),t=document.getElementById("js-rating-server-message-text");e&&(e.classList.remove("rating-modal__server-message--visible"),t&&(t.textContent=""),e.classList.remove("rating-modal__server-message--error","rating-modal__server-message--success"))}function P(e){e.key==="Escape"&&Y()}function Y(){const e=document.getElementById("js-rating-modal");if(!e)return;e.classList.remove("rating-modal--open"),document.body.style.overflow="",document.removeEventListener("keydown",P);const t=document.getElementById("js-rating-modal-email"),r=document.getElementById("js-email-error"),s=document.getElementById("js-rating-modal-comment"),n=document.getElementById("js-comment-error"),o=document.getElementById("js-rating-error");p(t,r),p(s,n),p(null,o),H()}function Z(e){const t=document.getElementById("js-rating-modal");if(!t)return;document.addEventListener("keydown",P);const r=document.getElementById("js-rating-modal-form"),s=document.getElementById("js-rating-modal-email"),n=document.getElementById("js-rating-modal-comment"),o=document.getElementById("js-rating-modal-value"),i=document.querySelectorAll(".rating-modal__star");r&&r.reset(),o&&(o.textContent="0.0");const a=document.getElementById("js-email-error"),l=document.getElementById("js-comment-error"),c=document.getElementById("js-rating-error");p(s,a),p(n,l),p(null,c),H(),i.forEach(u=>{u.classList.remove("rating-modal__star--active");const g=u.querySelector("svg");if(g){const m=g.querySelector("path");m&&(m.setAttribute("fill","none"),m.setAttribute("stroke","currentColor"))}}),t.classList.add("rating-modal--open"),document.body.style.overflow="hidden"}const M="favorites";function I(){try{const e=localStorage.getItem(M);return e?JSON.parse(e):[]}catch{return[]}}function W(e){try{const t=I();return t.includes(e)?!1:(t.push(e),localStorage.setItem(M,JSON.stringify(t)),!0)}catch{return!1}}function z(e){try{const r=I().filter(s=>s!==e);return localStorage.setItem(M,JSON.stringify(r)),!0}catch{return!1}}function O(e){return I().includes(e)}function G(e){return O(e)?(z(e),!1):(W(e),!0)}let q="home",f=null,w=null,S=null;function F(e){if(q===e)return;q=e,document.querySelectorAll(".header__nav-link").forEach(s=>{s.getAttribute("data-page")===e?s.classList.add("header__nav-link--active"):s.classList.remove("header__nav-link--active")}),document.querySelectorAll(".mobile-menu__nav-link").forEach(s=>{s.getAttribute("data-page")===e?s.classList.add("mobile-menu__nav-link--active"):s.classList.remove("mobile-menu__nav-link--active")}),e==="home"?ue():e==="favorites"&&me()}function X(){f&&(f.classList.add("is-open"),document.body.style.overflow="hidden")}function k(){f&&(f.classList.remove("is-open"),document.body.style.overflow="")}function ee(){document.querySelectorAll(".header__nav-link").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();const n=r.getAttribute("data-page");n&&F(n)})}),f=document.querySelector(".mobile-menu"),w=document.querySelector(".header__burger"),S=document.querySelector(".mobile-menu__close"),w&&w.addEventListener("click",X),S&&S.addEventListener("click",k),document.querySelectorAll(".mobile-menu__nav-link").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();const n=r.getAttribute("data-page");n&&(F(n),k())})}),f&&f.addEventListener("click",r=>{r.target===f&&k()})}function te(){return q}let N=null;function h(){const e=document.getElementById("js-exercise-modal");e&&(e.classList.remove("exercise-modal--open"),document.body.style.overflow="")}document.addEventListener("keydown",e=>{e.key==="Escape"&&h()});function ne(e){const t=document.getElementById("js-exercise-modal");if(!t)return;N=e,t.classList.add("exercise-modal--open"),document.body.style.overflow="hidden";const r=document.getElementById("js-exercise-modal-image"),s=document.getElementById("js-exercise-modal-title"),n=document.querySelector(".exercise-modal__rating-value"),o=document.querySelector(".exercise-modal__rating-stars"),i=document.getElementById("js-exercise-modal-target"),a=document.getElementById("js-exercise-modal-body-part"),l=document.getElementById("js-exercise-modal-equipment"),c=document.getElementById("js-exercise-modal-popular"),u=document.getElementById("js-exercise-modal-calories"),g=document.getElementById("js-exercise-modal-time"),m=document.getElementById("js-exercise-modal-description");s&&(s.textContent="Loading..."),n&&(n.textContent="0.0"),i&&(i.textContent=""),a&&(a.textContent=""),l&&(l.textContent=""),c&&(c.textContent="0"),u&&(u.textContent="0"),g&&(g.textContent="/0 min"),m&&(m.textContent=""),r&&(r.src=""),fetch(`https://your-energy.b.goit.study/api/exercises/${e}`).then(d=>{if(!d.ok)throw new Error("Failed to fetch exercise details");return d.json()}).then(d=>{if(r&&(r.src=d.gifUrl||""),s&&(s.textContent=d.name||""),i&&(i.textContent=d.target||""),a&&(a.textContent=d.bodyPart||""),l&&(l.textContent=d.equipment||""),c&&(c.textContent=d.popularity||0),u&&(u.textContent=d.burnedCalories||0),g&&(g.textContent=`/${d.time||0} min`),m&&(m.textContent=d.description||""),n&&(n.textContent=(d.rating||0).toFixed(1)),o){const C=o.querySelectorAll(".exercise-modal__rating-star"),Q=Math.round(d.rating||0);C.forEach((J,V)=>{const y=J.querySelector("path");V<Q?(y.setAttribute("fill","#EEA10C"),y.removeAttribute("stroke"),y.removeAttribute("stroke-width")):(y.setAttribute("fill","none"),y.setAttribute("stroke","rgba(255,255,255,0.3)"),y.setAttribute("stroke-width","1.5"))})}D(e);const L=document.getElementById("js-exercise-modal-rating-btn");if(L){const C=L.cloneNode(!0);L.parentNode.replaceChild(C,L),C.addEventListener("click",()=>{h(),Z()})}}).catch(d=>{s&&(s.textContent="Error loading exercise"),m&&(m.textContent="Failed to load exercise details. Please try again later.")})}function D(e){const t=document.getElementById("js-exercise-modal-favorites");if(!t)return;const r=O(e),s=t.querySelector("span"),n=t.querySelector("svg path");r?(t.classList.add("active"),s&&(s.textContent="Remove from favorites"),n&&(n.setAttribute("fill","currentColor"),n.removeAttribute("stroke"),n.removeAttribute("stroke-width"))):(t.classList.remove("active"),s&&(s.textContent="Add to favorites"),n&&(n.setAttribute("fill","none"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","2")))}function re(){const e=document.getElementById("js-exercise-modal-close"),r=document.getElementById("js-exercise-modal")?.querySelector(".exercise-modal__overlay");e&&e.addEventListener("click",h),r&&r.addEventListener("click",h);const s=document.getElementById("js-exercise-modal-favorites");s&&s.addEventListener("click",()=>{const n=N;if(!n)return;const o=G(n);D(n),!o&&te()==="favorites"&&(h(),K())})}let v="Muscles",x=1,_=null,E="",A="home";function se(){const e=document.getElementById("js-exercises-search");e&&(e.style.display="flex")}function R(){const e=document.getElementById("js-exercises-search"),t=document.getElementById("js-exercises-search-input");e&&(e.style.display="none"),t&&(t.value=""),E=""}function oe(){const e=document.querySelector(".exercises__content__main__cards");e&&e.addEventListener("click",t=>{const r=t.target.closest(".exercises__content__main__cards-item");if(!r)return;const s=r.getAttribute("data-category-name");if(s){T(s);return}const n=r.getAttribute("data-exercise-id");if(n){ne(n);return}})}function ie(e){return`
    <div class="exercises__content__main__cards-item" data-category-name="${e.name}">
      <div class="exercises__content__main__cards-item-image">
        <img src="${e.imgURL}" alt="${e.name} exercise" />
        <div class="exercises__content__main__cards-item-overlay">
          <div class="exercises__content__main__cards-item-overlay-name">${e.name}</div>
          <div class="exercises__content__main__cards-item-overlay-category">${e.filter}</div>
        </div>
      </div>
    </div>
  `}function ce(e){const t=e.rating||0,r=e.burnedCalories||0,s=e.time||0,n=e.bodyPart||"",o=e.target||"";return`
    <div class="exercises__content__main__cards-item exercises__content__main__cards-item--exercise" data-exercise-id="${e._id||""}">
      <div class="exercises__content__main__cards-item-header">
        <button class="exercises__content__main__cards-item-workout-btn">WORKOUT</button>
        <div class="exercises__content__main__cards-item-rating">
          <span class="exercises__content__main__cards-item-rating-value">${t.toFixed(1)}</span>
          <svg class="exercises__content__main__cards-item-rating-star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z" fill="#EEA10C"/>
          </svg>
        </div>
        <button class="exercises__content__main__cards-item-start-btn">
          Start
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.75 4.5L11.25 9L6.75 13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      <div class="exercises__content__main__cards-item-body">
        <div class="exercises__content__main__cards-item-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="exercises__content__main__cards-item-title">${e.name}</h3>
      </div>
      <div class="exercises__content__main__cards-item-footer">
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Burned calories:</span>
          <span class="exercises__content__main__cards-item-info-value">${r}</span>
          <span class="exercises__content__main__cards-item-info-label">/ ${s} min</span>
        </div>
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Body part:</span>
          <span class="exercises__content__main__cards-item-info-value">${n}</span>
        </div>
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Target:</span>
          <span class="exercises__content__main__cards-item-info-value">${o}</span>
        </div>
      </div>
    </div>
  `}function ae(e){const t=document.querySelector(".exercises__content__main__cards");t&&(t.classList.remove("exercises__content__main__cards--exercises"),t.innerHTML="",e.forEach(r=>{const s=ie(r);t.insertAdjacentHTML("beforeend",s)}))}function U(e){const t=document.querySelector(".exercises__content__main__cards");t&&(t.classList.add("exercises__content__main__cards--exercises"),t.innerHTML="",e.forEach(r=>{const s=ce(r);t.insertAdjacentHTML("beforeend",s)}))}function de(){const e=document.querySelector(".exercises__content__main__cards");if(!e)return;e.classList.add("exercises__content__main__cards--exercises"),e.innerHTML="",e.insertAdjacentHTML("beforeend",`
    <div class="exercises__content__main__empty-state">
      <p class="exercises__content__main__empty-state-text">
        Unfortunately, no results were found. You may want to consider other search options.
      </p>
    </div>
  `)}function B(e=null){const t=document.getElementById("js-exercises-breadcrumbs");if(!t)return;if(t.innerHTML="",A==="favorites"){const s=document.createElement("button");s.className="exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active",s.textContent="Favorites",s.setAttribute("data-breadcrumb","favorites"),t.appendChild(s);return}const r=document.createElement("button");if(r.className="exercises__content__header-breadcrumbs-item",r.textContent="Exercises",r.setAttribute("data-breadcrumb","exercises"),e||r.classList.add("exercises__content__header-breadcrumbs-item--active"),r.addEventListener("click",()=>{_=null,x=1,b(v,x)}),t.appendChild(r),e){const s=document.createElement("span");s.className="exercises__content__header-breadcrumbs-separator",s.textContent="/",t.appendChild(s);const n=document.createElement("button");n.className="exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active",n.textContent=e,t.appendChild(n)}}function j(e,t=1){const r=document.querySelector(".exercises__content__pagination");if(!r||(r.innerHTML="",e===1))return;const s=c=>{x=c,_?T(_,c):b(v,c)},n=document.createElement("button");n.className="exercises__content__pagination-arrow",n.innerHTML="&laquo;",n.disabled=t===1,n.addEventListener("click",()=>s(1)),r.appendChild(n);const o=document.createElement("button");o.className="exercises__content__pagination-arrow",o.innerHTML="&lsaquo;",o.disabled=t===1,o.addEventListener("click",()=>s(t-1)),r.appendChild(o);const i=c=>{const u=document.createElement("button");return u.className="exercises__content__pagination-page",u.textContent=c,c===t&&u.classList.add("exercises__content__pagination-page--active"),u.addEventListener("click",()=>s(c)),u};if(e<=5)for(let c=1;c<=e;c++)r.appendChild(i(c));else{r.appendChild(i(1)),r.appendChild(i(2)),r.appendChild(i(3));const c=document.createElement("span");c.className="exercises__content__pagination-ellipsis",c.textContent="...",r.appendChild(c),r.appendChild(i(e-1)),r.appendChild(i(e))}const a=document.createElement("button");a.className="exercises__content__pagination-arrow",a.innerHTML="&rsaquo;",a.disabled=t===e,a.addEventListener("click",()=>s(t+1)),r.appendChild(a);const l=document.createElement("button");l.className="exercises__content__pagination-arrow",l.innerHTML="&raquo;",l.disabled=t===e,l.addEventListener("click",()=>s(e)),r.appendChild(l)}function b(e,t=1){v=e,x=t,R();const s=`https://your-energy.b.goit.study/api/filters?filter=${encodeURIComponent(e)}&page=${t}`;fetch(s).then(n=>n.json()).then(n=>{const o=n.results||n.exercises||n||[],i=n.totalPages||n.total_pages||n.pageCount||1;Array.isArray(o)&&o.length>0?(_=null,B(null),ae(o),j(i,t)):(B(null),j(1,1))})}function T(e,t=1,r=E){_=e,x=t,E=r,se();let s="";v==="Muscles"?s="muscles":v==="Body parts"?s="bodyPart":v==="Equipment"&&(s="equipment");const n=encodeURIComponent(e);let o=`https://your-energy.b.goit.study/api/exercises?${s}=${n}&page=${t}&limit=10`;if(r&&r.trim()!==""){const i=encodeURIComponent(r.trim());o+=`&keyword=${i}`}fetch(o).then(i=>i.json()).then(i=>{const a=i.results||[],l=i.totalPages||1;if(B(e),Array.isArray(a)&&a.length>0)U(a),j(l,t);else{de();const c=document.querySelector(".exercises__content__pagination");c&&(c.innerHTML="")}})}function le(){const e=document.getElementById("js-exercises-search-input");if(!e)return;let t=null;e.addEventListener("input",()=>{t&&clearTimeout(t),t=setTimeout(()=>{const r=e.value.trim();_&&T(_,1,r)},1e3)})}function $(){const e=document.querySelector(".exercises__content__main__cards");if(!e)return;e.classList.add("exercises__content__main__cards--exercises"),e.innerHTML="",e.insertAdjacentHTML("beforeend",`
    <div class="exercises__content__main__empty-state">
      <p class="exercises__content__main__empty-state-text">
        It appears that you haven't added any exercises to your favorites yet. 
        To get started, you can add exercises that you like to your favorites 
        for easier access in the future.
      </p>
    </div>
  `)}function K(){const e=I();B(null);const t=document.querySelector(".exercises__content__pagination");if(t&&(t.innerHTML=""),e.length===0){$();return}const r=e.map(s=>fetch(`https://your-energy.b.goit.study/api/exercises/${s}`).then(n=>{if(!n.ok)throw new Error("Failed to fetch exercise");return n.json()}).catch(n=>null));Promise.all(r).then(s=>{const n=s.filter(o=>o!==null);n.length>0?U(n):$()})}function ue(){A="home",_=null,E="";const e=document.querySelector(".exercises__content__header-filters");e&&(e.style.display="flex");const t=document.querySelector(".exercises__content");t&&t.classList.remove("exercises__content--favorites"),b(v,1)}function me(){A="favorites",_=null,E="";const e=document.querySelector(".exercises__content__header-filters");e&&(e.style.display="none"),R();const t=document.querySelector(".exercises__content");t&&t.classList.add("exercises__content--favorites"),K()}function _e(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`}async function fe(){const e=localStorage.getItem("quote-text"),t=localStorage.getItem("quote-author"),r=localStorage.getItem("quote-date"),s=_e();if(e&&t&&r&&r===s)return{quote:e,author:t};try{const o=await(await fetch("https://your-energy.b.goit.study/api/quote")).json();return localStorage.setItem("quote-text",o.quote),localStorage.setItem("quote-author",o.author),localStorage.setItem("quote-date",s),{quote:o.quote,author:o.author}}catch{return e&&t?{quote:e,author:t}:null}}async function ge(){const e=await fe();if(!e)return;const t=document.getElementById("js-exercises-quote-text"),r=document.getElementById("js-exercises-quote-author");t&&(t.textContent=e.quote),r&&(r.textContent=e.author)}document.addEventListener("DOMContentLoaded",()=>{re()});document.addEventListener("DOMContentLoaded",async function(){console.log("DOM ready"),ee(),oe(),le();const e=document.querySelectorAll(".exercises__content__header-filters-item");e.forEach(t=>{t.addEventListener("click",function(){e.forEach(s=>s.classList.remove("exercises__content__header-filters-item--active")),this.classList.add("exercises__content__header-filters-item--active");const r=this.dataset.filter;b(r,1)})}),await ge(),b("Muscles",1)});
